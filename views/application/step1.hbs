<!-- Body Contents Start -->
<div class="main-area section-padding">
	<div class="container">
		<div class="row text-center">
			<div class="col-xs-12">
				<div class="app_header">
					<div class="tit">
						<h1>향의 베이스 선택: 가벼운 향, 무거운 향</h1>
						<p>아래에서 향기 베이스 1개를 선택해 주세요.</p>
					</div>
					<!-- //.tit -->
					<div class="count">
						<p>선호 테마 선택</p>
						<p><span id="cnt">0</span> / 1</p>
					</div>
					<!-- //.count -->
					<a href="./step2" class="btn_save">다음단계</a>
					<div id="indicator">
						<ul class="inb">
							<li class="current"><a href="./step1">BASE</a></li>
							<li><a href="./step2">THEME 1</a></li>
							<li><a href="./step3">THEME 2</a></li>
							<li><a href="./step4">THEME 3</a></li>
							<li><a href="./step5">INGREDIENTS 1</a></li>
							<li><a href="./step6">INGREDIENTS 2</a></li>
							<li><a href="./step7">INFORMATION</a></li>
						</ul>
					</div>
					<!-- //.indicator -->
				</div>
				<!-- //.app_header -->
				<div class="app_body">
					<form action="#" method="post" id="indiForm">
						<div class="app-grid">
							<div class="grid-item percent-50">
								<label for="love_base1">
									<div class="imgs overlay">
										<img src="../imgs/base/1_fresh.png" alt="가벼운 향" />
									</div>
									<div class="desc">
										<h4 class="name">가벼운 향</h4>
									</div>
								</label>
								<input id="love_base1" class="btn_inputs" type="radio" name="base" value="fresh" />
							</div>
							<div class="grid-item percent-50">
								<label for="love_base2">
									<div class="imgs overlay">
										<img src="../imgs/base/2_rich.png" alt="무거운 향" />
									</div>
									<div class="desc">
										<h4 class="name">무거운 향</h4>
									</div>
								</label>
								<input id="love_base2" class="btn_inputs" type="radio" name="base" value="rich" />
							</div>
						</div>
					</form>
				</div>
				<!-- //.app_body -->
			</div>
			<!--//.col-xs-12 -->
		</div>
		<!--//.row.text-center -->
	</div>
	<!--//.container -->
</div>
<!-- Body Contents End -->

<script>
$(document).ready(function () {
	var nextUrl = './step2';
	$('label').on('click', function () {
		$('label').removeClass('on');
		$(this).addClass('on');
	});

	$('.btn_save').on('click', function (e) {
		e.preventDefault();
		if ($('.btn_inputs').is(':checked')) {
			saveStep();
		} else {
			alert('향의 베이스를 선택해 주세요!');
		}
	});

	function saveStep (type) {
		console.log("Saving form data...");
		var oldData = JSON.parse(localStorage.getItem('form_data')) || {},
				newData = JSON.parse($("#indiForm").toJSON()),
				result = {};
		result = $.extend({}, oldData, newData);

		console.log(result);
		localStorage.setItem('form_data', JSON.stringify(result));

		setTimeout(function () {
			window.location.href = nextUrl;
		}, 1000);
	};

	loadStep();

	function loadStep () {
		if(localStorage['form_data'])	{
			console.log("Loading form data...");
			var result = JSON.parse(localStorage['form_data']);
			console.log(result);
			if (result.base) {
				var val = result.base;
				$('.btn_inputs[value=' + val + ']').attr('checked', true);
				$('.btn_inputs[value=' + val + ']').prev('label').addClass('on');
			} else {
				setTimeout(function () {
					$('input[type=radio]').attr('checked', false);
				}, 300);
			}
		} else {
			console.log("Error: Save some data first");
		}
		return false;
	};
});
</script>
